<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- wizards/bdr_budget_wizard_views.xml -->

    <!-- –§–æ—Ä–º–∞ –º–∞–π—Å—Ç—Ä–∞ —Ä–æ–±–æ—Ç–∏ –∑ –ë–î–† -->
    <record id="view_bdr_budget_wizard_form" model="ir.ui.view">
        <field name="name">bdr.budget.wizard.form</field>
        <field name="model">bdr.budget.wizard</field>
        <field name="arch" type="xml">
            <form string="–ú–∞–π—Å—Ç–µ—Ä —Ä–æ–±–æ—Ç–∏ –∑ –ë–î–† (–ë—é–¥–∂–µ—Ç –¥–æ—Ö–æ–¥—ñ–≤ —ñ –≤–∏—Ç—Ä–∞—Ç)">
                <div class="alert alert-info">
                    <h4>üíº –†–æ–±–æ—Ç–∞ –∑ –ë–î–† (–ë—é–¥–∂–µ—Ç –¥–æ—Ö–æ–¥—ñ–≤ —ñ –≤–∏—Ç—Ä–∞—Ç)</h4>
                    <p>–¶–µ–π –º–∞–π—Å—Ç–µ—Ä –¥–æ–∑–≤–æ–ª—è—î —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î–† –∑ Excel —Ñ–∞–π–ª—ñ–≤ —Ç–∞ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–∞ —ó—Ö –æ—Å–Ω–æ–≤—ñ –¥–µ—Ç–∞–ª—å–Ω—ñ –±—é–¥–∂–µ—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—ñ.</p>
                </div>

                <group>
                    <group string="üîß –¢–∏–ø –æ–ø–µ—Ä–∞—Ü—ñ—ó">
                        <field name="operation_type" widget="radio"/>
                    </group>
                </group>

                <!-- –°–µ–∫—Ü—ñ—è —ñ–º–ø–æ—Ä—Ç—É -->
                <group string="üì• –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ —ñ–º–ø–æ—Ä—Ç—É" invisible="operation_type != 'import'">
                    <group string="üìÇ –§–∞–π–ª –ë–î–†">
                        <field name="import_file" widget="binary" filename="filename"
                               help="–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ Excel —Ñ–∞–π–ª –∑ –ë–î–† –≤–∞—à–æ–≥–æ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–∞"/>
                        <field name="filename" invisible="1"/>
                        <field name="sheet_name" placeholder="–ë–î–†"/>
                        <field name="start_row"/>
                    </group>
                    <group string="üè¢ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –±—é–¥–∂–µ—Ç—É">
                        <field name="period_id" options="{'no_create': True}"/>
                        <field name="company_id" options="{'no_create': True}"/>
                        <field name="cbo_id" options="{'no_create': True}"
                               domain="[('company_ids', 'in', [company_id])]"/>
                        <field name="currency_multiplier"/>
                    </group>
                </group>

                <!-- –°–µ–∫—Ü—ñ—è –µ–∫—Å–ø–æ—Ä—Ç—É -->
                <group string="üì§ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –µ–∫—Å–ø–æ—Ä—Ç—É" invisible="operation_type != 'export'">
                    <group string="üóìÔ∏è –ü–µ—Ä—ñ–æ–¥ —Ç–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è">
                        <field name="period_id" options="{'no_create': True}"/>
                        <field name="company_id" options="{'no_create': True}"/>
                        <field name="sheet_name" placeholder="–ë–î–†"/>
                    </group>
                    <group string="‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –µ–∫—Å–ø–æ—Ä—Ç—É">
                        <field name="currency_multiplier"/>
                    </group>
                </group>

                <!-- –î–µ—Ç–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è -->
                <notebook>
                    <page string="üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–ª–æ–Ω–æ–∫ –ë–î–†" invisible="operation_type == 'analyze'">
                        <div class="alert alert-info">
                            <strong>üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Excel —Ñ–∞–π–ª—É –ë–î–†:</strong>
                            <p>–í–∫–∞–∂—ñ—Ç—å –≤ —è–∫–∏—Ö –∫–æ–ª–æ–Ω–∫–∞—Ö —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ —É –≤–∞—à–æ–º—É —Ñ–∞–π–ª—ñ –ë–î–†</p>
                        </div>

                        <group>
                            <group string="üìä –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–ª–æ–Ω–∫–∏">
                                <field name="item_column" placeholder="A"/>
                                <field name="total_column" placeholder="N"/>
                            </group>
                        </group>

                        <group string="üìÖ –ü–æ–º—ñ—Å—è—á–Ω—ñ –¥–∞–Ω—ñ">
                            <group string="–°—ñ—á–µ–Ω—å - –ß–µ—Ä–≤–µ–Ω—å">
                                <field name="jan_column" placeholder="B"/>
                                <field name="feb_column" placeholder="C"/>
                                <field name="mar_column" placeholder="D"/>
                                <field name="apr_column" placeholder="E"/>
                                <field name="may_column" placeholder="F"/>
                                <field name="jun_column" placeholder="G"/>
                            </group>
                            <group string="–õ–∏–ø–µ–Ω—å - –ì—Ä—É–¥–µ–Ω—å">
                                <field name="jul_column" placeholder="H"/>
                                <field name="aug_column" placeholder="I"/>
                                <field name="sep_column" placeholder="J"/>
                                <field name="oct_column" placeholder="K"/>
                                <field name="nov_column" placeholder="L"/>
                                <field name="dec_column" placeholder="M"/>
                            </group>
                        </group>
                    </page>

                    <page string="‚öôÔ∏è –î–æ–¥–∞—Ç–∫–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è" invisible="operation_type == 'analyze'">
                        <group>
                            <group string="üîÑ –û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö">
                                <field name="create_monthly_budgets"/>
                                <field name="update_existing"/>
                                <field name="auto_categorize"/>
                            </group>
                        </group>

                        <div class="alert alert-warning">
                            <h5>‚ö†Ô∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏:</h5>
                            <ul>
                                <li><strong>–ü–æ–º—ñ—Å—è—á–Ω—ñ –±—é–¥–∂–µ—Ç–∏:</strong> –°—Ç–≤–æ—Ä—é—î –æ–∫—Ä–µ–º—ñ –±—é–¥–∂–µ—Ç–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –º—ñ—Å—è—Ü—è</li>
                                <li><strong>–û–Ω–æ–≤–∏—Ç–∏ —ñ—Å–Ω—É—é—á—ñ:</strong> –û–Ω–æ–≤–ª—é—î –Ω–∞—è–≤–Ω—ñ –±—é–¥–∂–µ—Ç–∏ –∑–∞–º—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö</li>
                                <li><strong>–ê–≤—Ç–æ–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—è:</strong> –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –≤–∏—Ç—Ä–∞—Ç –∑–∞ –∫–ª—é—á–æ–≤–∏–º–∏ —Å–ª–æ–≤–∞–º–∏</li>
                            </ul>
                        </div>
                    </page>

                    <page string="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" invisible="not total_income and not total_expenses">
                        <group>
                            <group string="üí∞ –§—ñ–Ω–∞–Ω—Å–æ–≤—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏">
                                <field name="total_income" widget="monetary"/>
                                <field name="total_expenses" widget="monetary"/>
                                <field name="net_profit" widget="monetary"/>
                                <field name="currency_id" invisible="1"/>
                            </group>
                        </group>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="alert alert-success" invisible="net_profit &lt;= 0">
                                    <strong>‚úÖ –ü—Ä–∏–±—É—Ç–∫–æ–≤—ñ—Å—Ç—å:</strong> –ü—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–æ –æ—Ç—Ä–∏–º—É—î –ø—Ä–∏–±—É—Ç–æ–∫
                                </div>
                                <div class="alert alert-danger" invisible="net_profit &gt; 0">
                                    <strong>‚ùå –ó–±–∏—Ç–∫–æ–≤—ñ—Å—Ç—å:</strong> –ü—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–æ –Ω–µ—Å–µ –∑–±–∏—Ç–∫–∏
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h6>üìà –ü–æ–∫–∞–∑–Ω–∏–∫–∏ —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ:</h6>
                                        <p invisible="total_income == 0">
                                            –ú–∞—Ä–∂–∞: <field name="profit_margin" readonly="1" nolabel="1"/>%
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </page>

                    <page string="üëÅÔ∏è –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥" invisible="not preview_data">
                        <div class="alert alert-info">
                            <strong>üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î–†:</strong>
                            <p>–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ –¥–∞–Ω–∏—Ö –∑ –≤–∞—à–æ–≥–æ —Ñ–∞–π–ª—É –ë–î–†</p>
                        </div>
                        <field name="preview_data" widget="text" readonly="1" nolabel="1"/>
                    </page>

                    <page string="‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏" invisible="not import_summary">
                        <div class="alert alert-success">
                            <strong>üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü—ñ—ó:</strong>
                        </div>
                        <field name="import_summary" widget="text" readonly="1" nolabel="1"/>
                    </page>

                    <page string="üì• –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è" invisible="not result_file">
                        <group>
                            <field name="result_file" widget="binary"
                                   filename="result_filename" readonly="1"/>
                            <field name="result_filename" invisible="1"/>
                        </group>
                    </page>

                    <page string="üìñ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è">
                        <div class="container-fluid">
                            <div class="alert alert-info">
                                <h4>üìã –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è —Ä–æ–±–æ—Ç–∏ –∑ –ë–î–†</h4>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <h5>üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—É –ë–î–†:</h5>
                                    <table class="table table-sm table-bordered">
                                        <thead class="table-light">
                                            <tr>
                                                <th>–ö–æ–ª–æ–Ω–∫–∞</th>
                                                <th>–î–∞–Ω—ñ</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr><td>A</td><td>–ù–∞–∑–≤–∞ —Å—Ç–∞—Ç—Ç—ñ –ë–î–†</td></tr>
                                            <tr><td>B-M</td><td>–ü–æ–º—ñ—Å—è—á–Ω—ñ —Å—É–º–∏</td></tr>
                                            <tr><td>N</td><td>–†–∞–∑–æ–º –∑–∞ —Ä—ñ–∫</td></tr>
                                        </tbody>
                                    </table>

                                    <h5>üèóÔ∏è –†–æ–∑–¥—ñ–ª–∏ –ë–î–†:</h5>
                                    <ul>
                                        <li><strong>–î–æ—Ö–æ–¥–∏:</strong> –í–∏—Ä—É—á–∫–∞, –ø–æ—Å–ª—É–≥–∏, —ñ–Ω—à—ñ –¥–æ—Ö–æ–¥–∏</li>
                                        <li><strong>–ü—Ä—è–º—ñ –≤–∏—Ç—Ä–∞—Ç–∏:</strong> –°–æ–±—ñ–≤–∞—Ä—Ç—ñ—Å—Ç—å, –º–∞—Ç–µ—Ä—ñ–∞–ª–∏</li>
                                        <li><strong>–û–ø–µ—Ä–∞—Ü—ñ–π–Ω—ñ:</strong> –§–û–¢, –æ—Ä–µ–Ω–¥–∞, –∫–æ–º—É–Ω–∞–ª—å–Ω—ñ</li>
                                        <li><strong>–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ñ:</strong> –£–ø—Ä–∞–≤–ª—ñ–Ω—Å—å–∫—ñ –≤–∏—Ç—Ä–∞—Ç–∏</li>
                                        <li><strong>–§—ñ–Ω–∞–Ω—Å–æ–≤—ñ:</strong> –í—ñ–¥—Å–æ—Ç–∫–∏, –∫—É—Ä—Å–æ–≤—ñ —Ä—ñ–∑–Ω–∏—Ü—ñ</li>
                                    </ul>
                                </div>

                                <div class="col-md-6">
                                    <h5>‚ö° –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Å–∏—Å—Ç–µ–º–∏:</h5>
                                    <ul>
                                        <li>‚úÖ <strong>–Ü–º–ø–æ—Ä—Ç –ë–î–†:</strong> –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ Excel</li>
                                        <li>‚úÖ <strong>–ê–≤—Ç–æ–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—è:</strong> –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π</li>
                                        <li>‚úÖ <strong>–ü–æ–º—ñ—Å—è—á–Ω–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è:</strong> –î–µ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–æ –º—ñ—Å—è—Ü—è—Ö</li>
                                        <li>‚úÖ <strong>–ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω—ñ—Å—Ç—å:</strong> –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä—ñ–∑–Ω–∏—Ö –≤–∞–ª—é—Ç</li>
                                        <li>‚úÖ <strong>–ï–∫—Å–ø–æ—Ä—Ç –∑–≤—ñ—Ç—ñ–≤:</strong> –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–≤—ñ—Ç–Ω–∏—Ö —Ñ–æ—Ä–º</li>
                                        <li>‚úÖ <strong>–ê–Ω–∞–ª—ñ–∑ –¥–∞–Ω–∏—Ö:</strong> –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç—ñ</li>
                                    </ul>

                                    <h5>üéØ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–±–æ—Ç–∏:</h5>
                                    <ol>
                                        <li>–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ Excel —Ñ–∞–π–ª –∑ –ë–î–†</li>
                                        <li>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥"</li>
                                        <li>–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞ –¥–∞–Ω—ñ</li>
                                        <li>–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —ñ–º–ø–æ—Ä—Ç—É</li>
                                        <li>–í–∏–∫–æ–Ω–∞–π—Ç–µ —ñ–º–ø–æ—Ä—Ç –ë–î–†</li>
                                        <li>–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –±—é–¥–∂–µ—Ç–∏</li>
                                    </ol>
                                </div>
                            </div>

                            <div class="alert alert-warning">
                                <h5>‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –º–æ–º–µ–Ω—Ç–∏:</h5>
                                <ul>
                                    <li>–§–∞–π–ª –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î–†</li>
                                    <li>–°—Ç–∞—Ç—Ç—ñ –ë–î–† –≥—Ä—É–ø—É—é—Ç—å—Å—è –ø–æ —Ä–æ–∑–¥—ñ–ª–∞—Ö (–¥–æ—Ö–æ–¥–∏, –≤–∏—Ç—Ä–∞—Ç–∏)</li>
                                    <li>–°—É–º–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤ –≥—Ä–Ω, —Ç–∏—Å.–≥—Ä–Ω –∞–±–æ –º–ª–Ω.–≥—Ä–Ω</li>
                                    <li>–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ —Ç–∏–ø–∏ –±—é–¥–∂–µ—Ç—ñ–≤</li>
                                </ul>
                            </div>
                        </div>
                    </page>
                </notebook>

                <footer>
                    <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É -->
                    <button name="action_preview_bdr"
                            string="üëÅÔ∏è –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥"
                            type="object"
                            class="btn-info"
                            invisible="operation_type != 'import' or not import_file"/>

                    <button name="action_import_bdr"
                            string="üì• –Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –ë–î–†"
                            type="object"
                            class="btn-primary"
                            invisible="operation_type != 'import' or not import_file"/>

                    <button name="action_analyze_bdr"
                            string="üîç –ê–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ë–î–†"
                            type="object"
                            class="btn-warning"
                            invisible="operation_type != 'analyze' and operation_type != 'import'"/>

                    <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –µ–∫—Å–ø–æ—Ä—Ç—É -->
                    <button name="action_export_bdr"
                            string="üì§ –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –ë–î–†"
                            type="object"
                            class="btn-success"
                            invisible="operation_type != 'export'"/>

                    <!-- –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥—ñ—ó -->
                    <button name="action_create_bdr_template"
                            string="üóÇÔ∏è –°—Ç–≤–æ—Ä–∏—Ç–∏ —à–∞–±–ª–æ–Ω–∏ –ë–î–†"
                            type="object"
                            class="btn-secondary"/>

                    <button string="–ó–∞–∫—Ä–∏—Ç–∏"
                            class="btn-default"
                            special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <!-- Action –¥–ª—è wizard -->
    <record id="action_bdr_budget_wizard" model="ir.actions.act_window">
        <field name="name">–†–æ–±–æ—Ç–∞ –∑ –ë–î–† (–ë—é–¥–∂–µ—Ç –¥–æ—Ö–æ–¥—ñ–≤ —ñ –≤–∏—Ç—Ä–∞—Ç)</field>
        <field name="res_model">bdr.budget.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="view_id" ref="view_bdr_budget_wizard_form"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                –†–æ–±–æ—Ç–∞ –∑ –ë–î–† (–ë—é–¥–∂–µ—Ç –¥–æ—Ö–æ–¥—ñ–≤ —ñ –≤–∏—Ç—Ä–∞—Ç)
            </p>
            <p>
                –¶–µ–π –º–∞–π—Å—Ç–µ—Ä –¥–æ–∑–≤–æ–ª—è—î:
                <ul>
                    <li>–Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –ë–î–† –∑ Excel —Ñ–∞–π–ª—ñ–≤</li>
                    <li>–°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –¥–µ—Ç–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –±—é–¥–∂–µ—Ç–∏</li>
                    <li>–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ —É —Ñ–æ—Ä–º–∞—Ç –ë–î–†</li>
                    <li>–ê–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–æ—Ö–æ–¥—ñ–≤ —ñ –≤–∏—Ç—Ä–∞—Ç</li>
                </ul>
            </p>
        </field>
    </record>

    <!-- –ú–µ–Ω—é –¥–ª—è –ë–î–† -->
    <menuitem id="menu_bdr_budget_wizard"
              name="üíº –ë–î–† (–î–æ—Ö–æ–¥–∏ —ñ –≤–∏—Ç—Ä–∞—Ç–∏)"
              parent="menu_budget_planning"
              action="action_bdr_budget_wizard"
              sequence="40"/>

    <!-- Server Action –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —ñ–º–ø–æ—Ä—Ç—É –ë–î–† -->
    <record id="action_quick_import_bdr" model="ir.actions.server">
        <field name="name">–®–≤–∏–¥–∫–∏–π —ñ–º–ø–æ—Ä—Ç –ë–î–†</field>
        <field name="model_id" ref="model_budget_plan"/>
        <field name="binding_model_id" ref="model_budget_plan"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code">
action = {
    'type': 'ir.actions.act_window',
    'name': '–Ü–º–ø–æ—Ä—Ç –ë–î–†',
    'res_model': 'bdr.budget.wizard',
    'view_mode': 'form',
    'target': 'new',
    'context': {'default_operation_type': 'import'}
}
        </field>
    </record>

    <!-- Action –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –ë–î–† -->
    <record id="action_analyze_bdr_quick" model="ir.actions.server">
        <field name="name">–ê–Ω–∞–ª—ñ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ë–î–†</field>
        <field name="model_id" ref="model_budget_period"/>
        <field name="binding_model_id" ref="model_budget_period"/>
        <field name="binding_view_types">list,form</field>
        <field name="state">code</field>
        <field name="code">
action = {
    'type': 'ir.actions.act_window',
    'name': '–ê–Ω–∞–ª—ñ–∑ –ë–î–†',
    'res_model': 'bdr.budget.wizard',
    'view_mode': 'form',
    'target': 'new',
    'context': {
        'default_operation_type': 'analyze',
        'default_period_id': record.id if record._name == 'budget.period' else False
    }
}
        </field>
    </record>

    <!-- Quick Actions –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é -->
    <record id="action_export_bdr_from_budget" model="ir.actions.server">
        <field name="name">–ï–∫—Å–ø–æ—Ä—Ç –≤ –ë–î–†</field>
        <field name="model_id" ref="model_budget_plan"/>
        <field name="binding_model_id" ref="model_budget_plan"/>
        <field name="binding_view_types">form</field>
        <field name="state">code</field>
        <field name="code">
action = {
    'type': 'ir.actions.act_window',
    'name': '–ï–∫—Å–ø–æ—Ä—Ç –≤ –ë–î–†',
    'res_model': 'bdr.budget.wizard',
    'view_mode': 'form',
    'target': 'new',
    'context': {
        'default_operation_type': 'export',
        'default_period_id': record.period_id.id,
        'default_company_id': record.company_id.id,
        'default_cbo_id': record.cbo_id.id
    }
}
        </field>
    </record>

    <!-- Scheduled Action –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ë–î–† -->
    <record id="ir_cron_auto_generate_bdr" model="ir.cron">
        <field name="name">–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—ñ—Å—è—á–Ω–∏—Ö –ë–î–†</field>
        <field name="model_id" ref="model_bdr_budget_wizard"/>
        <field name="state">code</field>
        <field name="code">
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ë–î–† –¥–ª—è –Ω–æ–≤–∏—Ö –ø–µ—Ä—ñ–æ–¥—ñ–≤
periods = env['budget.period'].search([
    ('state', '=', 'draft'),
    ('period_type', '=', 'month'),
    ('date_start', '&gt;=', fields.Date.today())
])

for period in periods:
    # –°—Ç–≤–æ—Ä—é—î–º–æ –±–∞–∑–æ–≤–∏–π –ë–î–† –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –Ω–æ–≤–æ–≥–æ –º—ñ—Å—è—á–Ω–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É
    wizard = env['bdr.budget.wizard'].create({
        'operation_type': 'export',
        'period_id': period.id,
        'company_id': period.company_id.id
    })

    # –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω–Ω–∏—Ö –±—é–¥–∂–µ—Ç—ñ–≤
        </field>
        <field name="interval_number">1</field>
        <field name="interval_type">days</field>
        <field name="numbercall">-1</field>
        <field name="active">False</field>
        <field name="user_id" ref="base.user_admin"/>
    </record>

    <!-- Dashboard Action –¥–ª—è –ë–î–† -->
    <record id="action_bdr_dashboard" model="ir.actions.client">
        <field name="name">Dashboard –ë–î–†</field>
        <field name="tag">bdr_dashboard</field>
    </record>

    <!-- Menuitem –¥–ª—è Dashboard -->
    <menuitem id="menu_bdr_dashboard"
              name="üìä Dashboard –ë–î–†"
              parent="menu_budget_root"
              action="action_bdr_dashboard"
              sequence="15"/>

    <!-- Security Rules -->
    <record id="bdr_wizard_rule_company" model="ir.rule">
        <field name="name">–ë–î–† Wizard - Company Rule</field>
        <field name="model_id" ref="model_bdr_budget_wizard"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <!-- Email Template –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–æ –ë–î–† -->
    <record id="email_template_bdr_imported" model="mail.template">
        <field name="name">–ë–î–† –Ü–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ</field>
        <field name="model_id" ref="model_budget_plan"/>
        <field name="subject">‚úÖ –ë–î–† —É—Å–ø—ñ—à–Ω–æ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ - ${object.display_name}</field>
        <field name="body_html" type="html">
            <div style="margin: 0px; padding: 0px;">
                <p>–í—ñ—Ç–∞—î–º–æ!</p>
                <p>–ë–î–† <strong>${object.display_name}</strong> —É—Å–ø—ñ—à–Ω–æ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ –≤ —Å–∏—Å—Ç–µ–º—É –±—é–¥–∂–µ—Ç—É–≤–∞–Ω–Ω—è.</p>

                <h3>üìä –î–µ—Ç–∞–ª—ñ —ñ–º–ø–æ—Ä—Ç—É:</h3>
                <ul>
                    <li><strong>–ü–µ—Ä—ñ–æ–¥:</strong> ${object.period_id.name}</li>
                    <li><strong>–¶–ë–û:</strong> ${object.cbo_id.name}</li>
                    <li><strong>–¢–∏–ø –±—é–¥–∂–µ—Ç—É:</strong> ${object.budget_type_id.name}</li>
                    <li><strong>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–∑–∏—Ü—ñ–π:</strong> ${len(object.line_ids)}</li>
                </ul>

                <h3>üí∞ –§—ñ–Ω–∞–Ω—Å–æ–≤—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏:</h3>
                <ul>
                    <li><strong>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞:</strong> ${object.total_planned_amount} ${object.currency_id.name}</li>
                </ul>

                <p>
                    <a href="/web#id=${object.id}&amp;view_type=form&amp;model=budget.plan"
                       style="background-color: #875A7B; padding: 8px 16px; text-decoration: none; color: #fff; border-radius: 5px;">
                        –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –±—é–¥–∂–µ—Ç
                    </a>
                </p>

                <p>–ó –ø–æ–≤–∞–≥–æ—é,<br/>–°–∏—Å—Ç–µ–º–∞ –±—é–¥–∂–µ—Ç—É–≤–∞–Ω–Ω—è</p>
            </div>
        </field>
    </record>

    <!-- Automation –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å -->
    <record id="action_notify_bdr_imported" model="ir.actions.server">
        <field name="name">–ü–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –ø—Ä–æ —ñ–º–ø–æ—Ä—Ç –ë–î–†</field>
        <field name="model_id" ref="model_budget_plan"/>
        <field name="binding_model_id" ref="model_budget_plan"/>
        <field name="binding_view_types">form</field>
        <field name="state">code</field>
        <field name="code">
    if records.filtered(lambda r: '–Ü–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ –∑ –ë–î–†' in (r.notes or '')):
        for record in records:
            record.message_post(
                body="üéØ –ë–î–† —É—Å–ø—ñ—à–Ω–æ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ! –°—Ç–≤–æ—Ä–µ–Ω–æ %d –ø–æ–∑–∏—Ü—ñ–π –±—é–¥–∂–µ—Ç—É." % len(record.line_ids),
                subject="–ë–î–† —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ"
            )
        </field>
    </record>

</odoo>