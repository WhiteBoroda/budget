<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- static/src/xml/budget_dashboard_templates.xml -->
    <!-- –®–∞–±–ª–æ–Ω–∏ –¥–ª—è –≤–∏–¥–∂–µ—Ç—ñ–≤ –±—é–¥–∂–µ—Ç—É–≤–∞–Ω–Ω—è -->

    <!-- –®–∞–±–ª–æ–Ω –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç—É –ø–∞–Ω–µ–ª—ñ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è -->
    <template id="budget.BudgetDashboardWidget" name="Budget Dashboard Widget">
        <div class="budget-dashboard-widget">
            <div t-if="state.loading" class="text-center">
                <i class="fa fa-spinner fa-spin"/>
                <span>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span>
            </div>

            <div t-else="" class="budget-dashboard-content">
                <div class="budget-stats-grid">
                    <div class="budget-stat-card total">
                        <div class="stat-icon">üìã</div>
                        <div class="stat-number">
                            <t t-esc="state.totalBudgets"/>
                        </div>
                        <div class="stat-label">–í—Å—å–æ–≥–æ –±—é–¥–∂–µ—Ç—ñ–≤</div>
                    </div>

                    <div class="budget-stat-card approved">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-number">
                            <t t-esc="state.approvedBudgets"/>
                        </div>
                        <div class="stat-label">–ó–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω—ñ</div>
                    </div>

                    <div class="budget-stat-card pending">
                        <div class="stat-icon">‚è≥</div>
                        <div class="stat-number">
                            <t t-esc="state.pendingBudgets"/>
                        </div>
                        <div class="stat-label">–û—á—ñ–∫—É—é—Ç—å</div>
                    </div>

                    <div class="budget-stat-card overdue">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-number">
                            <t t-esc="state.overdueBudgets"/>
                        </div>
                        <div class="stat-label">–ü—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω—ñ</div>
                    </div>
                </div>

                <div class="budget-action-buttons">
                    <button type="button" class="btn btn-primary" t-on-click="onViewBudgets">
                        üìã –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –±—é–¥–∂–µ—Ç–∏
                    </button>
                    <button type="button" class="btn btn-secondary" t-on-click="onRefreshClick">
                        üîÑ –û–Ω–æ–≤–∏—Ç–∏
                    </button>
                    <button type="button" class="btn btn-warning" t-on-click="onViewOverdue"
                            t-if="state.overdueBudgets > 0">
                        ‚ö†Ô∏è –ü—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω—ñ (<t t-esc="state.overdueBudgets"/>)
                    </button>
                </div>
            </div>
        </div>
    </template>

    <!-- –®–∞–±–ª–æ–Ω –¥–ª—è –≤–∏–¥–∂–µ—Ç—É –ë–î–† Dashboard -->
    <template id="budget.BdrDashboardWidget" name="BDR Dashboard Widget">
        <div class="bdr-dashboard-widget">
            <div t-if="state.loading" class="text-center">
                <i class="fa fa-spinner fa-spin"/>
                <span>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –ë–î–†...</span>
            </div>

            <div t-else="" class="bdr-dashboard-content">
                <div class="bdr-header">
                    <h3>üíº –ë—é–¥–∂–µ—Ç –¥–æ—Ö–æ–¥—ñ–≤ —ñ –≤–∏—Ç—Ä–∞—Ç (–ë–î–†)</h3>
                </div>

                <div class="bdr-stats-grid">
                    <div class="bdr-stat-card income">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-number">
                            <t t-esc="state.totalIncome"/>
                        </div>
                        <div class="stat-label">–ó–∞–≥–∞–ª—å–Ω—ñ –¥–æ—Ö–æ–¥–∏</div>
                    </div>

                    <div class="bdr-stat-card expenses">
                        <div class="stat-icon">üí∏</div>
                        <div class="stat-number">
                            <t t-esc="state.totalExpenses"/>
                        </div>
                        <div class="stat-label">–ó–∞–≥–∞–ª—å–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏</div>
                    </div>

                    <div class="bdr-stat-card profit" t-attf-class="#{state.netProfit >= 0 ? 'positive' : 'negative'}">
                        <div class="stat-icon">
                            <t t-if="state.netProfit >= 0">üìà</t>
                            <t t-else="">üìâ</t>
                        </div>
                        <div class="stat-number">
                            <t t-esc="state.netProfit"/>
                        </div>
                        <div class="stat-label">–ß–∏—Å—Ç–∏–π –ø—Ä–∏–±—É—Ç–æ–∫</div>
                    </div>
                </div>

                <div class="bdr-sections" t-if="state.sections.length">
                    <h4>üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î–†</h4>
                    <div class="bdr-sections-list">
                        <div t-foreach="state.sections" t-as="section" class="bdr-section-item">
                            <span class="section-name"><t t-esc="section.name"/></span>
                            <span class="section-amount"><t t-esc="section.amount"/></span>
                        </div>
                    </div>
                </div>

                <div class="bdr-action-buttons">
                    <button type="button" class="btn btn-primary" t-on-click="onViewBdrWizard">
                        üßô‚Äç‚ôÇÔ∏è –ú–∞–π—Å—Ç–µ—Ä –ë–î–†
                    </button>
                    <button type="button" class="btn btn-secondary" t-on-click="onRefreshClick">
                        üîÑ –û–Ω–æ–≤–∏—Ç–∏
                    </button>
                </div>
            </div>
        </div>
    </template>

    <!-- –®–∞–±–ª–æ–Ω –¥–ª—è –≤–∏–¥–∂–µ—Ç—É –ø—Ä–æ–≥—Ä–µ—Å—É -->
    <template id="budget.BudgetProgressWidget" name="Budget Progress Widget">
        <div class="budget-progress-widget">
            <div class="progress-info">
                <div class="progress-labels">
                    <span>–ü–ª–∞–Ω–æ–≤–æ: <t t-esc="props.planned"/></span>
                    <span>–§–∞–∫—Ç–∏—á–Ω–æ: <t t-esc="props.actual"/></span>
                    <span class="variance" t-attf-class="#{varianceClass}">
                        –í—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è: <t t-esc="props.variance || 0"/>
                    </span>
                </div>
                <div class="progress-percentage">
                    <t t-esc="executionPercent"/>%
                </div>
            </div>

            <div class="progress">
                <div class="progress-bar"
                     t-attf-class="#{progressBarClass}"
                     t-attf-style="width: #{executionPercent}%">
                </div>
            </div>
        </div>
    </template>

    <!-- –®–∞–±–ª–æ–Ω –¥–ª—è –≤–∏–¥–∂–µ—Ç—É —à–≤–∏–¥–∫–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–≥–Ω–æ–∑—É -->
    <template id="budget.QuickForecastWidget" name="Quick Forecast Widget">
        <div class="quick-forecast-widget">
            <h4>üöÄ –®–≤–∏–¥–∫–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–≥–Ω–æ–∑—É</h4>

            <div class="quick-forecast-form">
                <div class="form-group">
                    <label>–ö–æ–º–∞–Ω–¥–∞:</label>
                    <select class="form-control" t-model="state.selectedTeam">
                        <option value="">–û–±–µ—Ä—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É</option>
                        <option t-foreach="state.teams" t-as="team" t-att-value="team.id">
                            <t t-esc="team.name"/>
                        </option>
                    </select>
                </div>

                <div class="form-group">
                    <label>–ü–µ—Ä—ñ–æ–¥:</label>
                    <select class="form-control" t-model="state.selectedPeriod">
                        <option value="">–û–±–µ—Ä—ñ—Ç—å –ø–µ—Ä—ñ–æ–¥</option>
                        <option t-foreach="state.periods" t-as="period" t-att-value="period.id">
                            <t t-esc="period.name"/>
                        </option>
                    </select>
                </div>

                <div class="form-group">
                    <button type="button" class="btn btn-success"
                            t-on-click="onCreateForecast"
                            t-att-disabled="state.loading">
                        <span t-if="state.loading">
                            <i class="fa fa-spinner fa-spin"/> –°—Ç–≤–æ—Ä–µ–Ω–Ω—è...
                        </span>
                        <span t-else="">
                            ‚ûï –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑
                        </span>
                    </button>
                </div>
            </div>
        </div>
    </template>

    <!-- –®–∞–±–ª–æ–Ω –¥–ª—è –≤–∏–¥–∂–µ—Ç—É –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ -->
    <template id="budget.BudgetAnalyticsWidget" name="Budget Analytics Widget">
        <div class="budget-analytics-widget">
            <div t-if="state.loading" class="text-center">
                <i class="fa fa-spinner fa-spin"/>
                <span>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏...</span>
            </div>

            <div t-else="" class="budget-analytics-content">
                <h4>üìä –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –±—é–¥–∂–µ—Ç—ñ–≤</h4>

                <div class="chart-container">
                    <canvas id="budgetChart" width="400" height="200"></canvas>
                </div>

                <div class="analytics-summary" t-if="state.chartData">
                    <p>–ì—Ä–∞—Ñ—ñ–∫ –ø–æ–∫–∞–∑—É—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –±—é–¥–∂–µ—Ç—ñ–≤ –∑–∞ –æ–±—Ä–∞–Ω–∏–π –ø–µ—Ä—ñ–æ–¥</p>
                </div>
            </div>
        </div>
    </template>

</odoo>