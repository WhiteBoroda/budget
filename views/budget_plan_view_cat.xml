<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- views/budget_plan_views.xml - –û–ù–û–í–õ–ï–ù–ê –í–ï–†–°–Ü–Ø –ó –ö–ê–¢–ï–ì–û–†–Ü–Ø–ú–ò -->

    <!-- –û–ù–û–í–õ–ï–ù–ê –§–û–†–ú–ê –ë–Æ–î–ñ–ï–¢–ù–û–ì–û –ü–õ–ê–ù–£ -->
    <record id="view_budget_plan_form_with_categories" model="ir.ui.view">
        <field name="name">budget.plan.form.with.categories</field>
        <field name="model">budget.plan</field>
        <field name="inherit_id" ref="view_budget_plan_form"/>
        <field name="arch" type="xml">

            <!-- –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö -->
            <xpath expr="//header" position="inside">
                <button name="action_update_accounting_data"
                        string="–û–Ω–æ–≤–∏—Ç–∏ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ"
                        type="object"
                        class="btn-secondary"
                        groups="account.group_account_user"
                        help="–û–Ω–æ–≤–∏—Ç–∏ —Ä–∞—Ö—É–Ω–∫–∏ –∑–≥—ñ–¥–Ω–æ –∑ –ø–æ—Ç–æ—á–Ω–∏–º–∏ –∑–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—è–º–∏"/>
            </xpath>

            <!-- –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä -->
            <xpath expr="//notebook/page[1]" position="replace">
                <page string="–ü–æ–∑–∏—Ü—ñ—ó –±—é–¥–∂–µ—Ç—É">
                    <div class="alert alert-info" role="alert">
                        <strong>–°–ø—Ä–æ—â–µ–Ω–µ –≤–≤–µ–¥–µ–Ω–Ω—è:</strong> –û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é –≤–∏—Ç—Ä–∞—Ç —Ç–∞ —Ü–µ–Ω—Ç—Ä –≤–∏—Ç—Ä–∞—Ç.
                        –û–±–ª—ñ–∫–æ–≤—ñ —Ä–∞—Ö—É–Ω–∫–∏ –≤–∏–∑–Ω–∞—á–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≥—ñ–¥–Ω–æ –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏.
                        <button name="action_update_accounting_data" type="object"
                                class="btn btn-sm btn-outline-primary ml-2"
                                groups="account.group_account_user">
                            –û–Ω–æ–≤–∏—Ç–∏ —Ä–∞—Ö—É–Ω–∫–∏
                        </button>
                    </div>

                    <field name="line_ids"
                           context="{'default_calculation_method': 'manual'}"
                           mode="tree">
                        <tree editable="bottom" decoration-muted="is_consolidation">
                            <!-- –°–ü–†–û–©–ï–ù–Ü –ü–û–õ–Ø –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ -->
                            <field name="budget_category_id"
                                   string="–ö–∞—Ç–µ–≥–æ—Ä—ñ—è –≤–∏—Ç—Ä–∞—Ç"
                                   options="{'no_create': True, 'no_edit': True}"
                                   required="1"/>

                            <field name="cost_center_id"
                                   string="–¶–µ–Ω—Ç—Ä –≤–∏—Ç—Ä–∞—Ç"
                                   options="{'no_create': True, 'no_edit': True}"/>

                            <field name="description"
                                   string="–û–ø–∏—Å"/>

                            <!-- –ü–õ–ê–ù–£–í–ê–ù–ù–Ø -->
                            <field name="quantity" string="–ö—ñ–ª—å–∫—ñ—Å—Ç—å"/>
                            <field name="unit_price" string="–¶—ñ–Ω–∞ –∑–∞ –æ–¥–∏–Ω–∏—Ü—é"
                                   widget="monetary"/>
                            <field name="planned_amount"
                                   string="–ü–ª–∞–Ω–æ–≤–∞ —Å—É–º–∞"
                                   widget="monetary"
                                   sum="–í—Å—å–æ–≥–æ"/>

                            <!-- –í–ò–ö–û–ù–ê–ù–ù–Ø (—Ç—ñ–ª—å–∫–∏ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è) -->
                            <field name="actual_amount"
                                   string="–§–∞–∫—Ç"
                                   widget="monetary"
                                   readonly="1"/>

                            <!-- –°–õ–£–ñ–ë–û–í–Ü –ü–û–õ–Ø -->
                            <field name="calculation_method" optional="hide"/>
                            <field name="is_consolidation" invisible="1"/>
                            <field name="currency_id" invisible="1"/>

                            <!-- –†–û–ó–®–ò–†–ï–ù–Ü –ü–û–õ–Ø (–ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º) -->
                            <field name="account_id" optional="hide"
                                   string="–†–∞—Ö—É–Ω–æ–∫ –æ–±–ª—ñ–∫—É"
                                   groups="account.group_account_user"/>
                            <field name="analytic_account_id" optional="hide"
                                   string="–ê–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏–π —Ä–∞—Ö—É–Ω–æ–∫"
                                   groups="account.group_account_user"/>
                        </tree>

                        <!-- –†–û–ó–®–ò–†–ï–ù–ê –§–û–†–ú–ê –î–õ–Ø –†–ï–î–ê–ì–£–í–ê–ù–ù–Ø –ü–û–ó–ò–¶–Ü–á -->
                        <form string="–ü–æ–∑–∏—Ü—ñ—è –±—é–¥–∂–µ—Ç—É">
                            <sheet>
                                <div class="oe_title">
                                    <h1>
                                        <field name="description" placeholder="–û–ø–∏—Å –ø–æ–∑–∏—Ü—ñ—ó –±—é–¥–∂–µ—Ç—É..."/>
                                    </h1>
                                </div>

                                <group>
                                    <group string="–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—è">
                                        <field name="budget_category_id"
                                               options="{'no_create': True}"/>
                                        <field name="cost_center_id"
                                               options="{'no_create': True}"/>
                                        <field name="description"/>
                                    </group>

                                    <group string="–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è">
                                        <field name="quantity"/>
                                        <field name="unit_price"/>
                                        <field name="planned_amount"
                                               class="oe_inline"
                                               style="font-size: 16px; font-weight: bold;"/>
                                        <field name="calculation_method"/>
                                    </group>
                                </group>

                                <group string="–û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è">
                                    <field name="calculation_basis" nolabel="1"
                                           placeholder="–Ø–∫ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ —Ü—é —Å—É–º—É?"/>
                                </group>

                                <notebook>
                                    <page string="–í–∏–∫–æ–Ω–∞–Ω–Ω—è">
                                        <group>
                                            <group string="–í–∏—Ç—Ä–∞—á–µ–Ω–æ">
                                                <field name="committed_amount"/>
                                                <field name="actual_amount"/>
                                            </group>
                                            <group string="–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞">
                                                <field name="department_id"/>
                                                <field name="project_id"/>
                                            </group>
                                        </group>
                                    </page>

                                    <page string="–û–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ"
                                          groups="account.group_account_user">
                                        <div class="alert alert-warning" role="alert">
                                            <strong>–£–≤–∞–≥–∞:</strong> –¶—ñ –ø–æ–ª—è –∑–∞–ø–æ–≤–Ω—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
                                            –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω—å –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∑ —Ä–∞—Ö—É–Ω–∫–∞–º–∏.
                                        </div>
                                        <group>
                                            <group string="–†–∞—Ö—É–Ω–∫–∏">
                                                <field name="account_id"
                                                       options="{'no_create': True}"/>
                                                <field name="analytic_account_id"
                                                       options="{'no_create': True}"/>
                                            </group>
                                            <group string="–ö–æ–¥–∏">
                                                <field name="category_code" readonly="1"/>
                                                <field name="cost_center_code" readonly="1"/>
                                                <field name="is_consolidation" readonly="1"/>
                                            </group>
                                        </group>
                                    </page>

                                    <page string="–ü—Ä–æ–≥–Ω–æ–∑ –ø—Ä–æ–¥–∞–∂—ñ–≤"
                                          invisible="not sales_forecast_line_id">
                                        <group string="–ó–≤'—è–∑–æ–∫ –∑ –ø—Ä–æ–≥–Ω–æ–∑–æ–º">
                                            <field name="sales_forecast_line_id" readonly="1"/>
                                        </group>
                                    </page>

                                    <page string="–ü—Ä–∏–º—ñ—Ç–∫–∏">
                                        <field name="notes" nolabel="1"/>
                                    </page>
                                </notebook>
                            </sheet>
                        </form>
                    </field>
                </page>
            </xpath>

        </field>
    </record>

    <!-- –°–ü–†–û–©–ï–ù–ò–ô TREE VIEW –î–õ–Ø –ó–í–ò–ß–ê–ô–ù–ò–• –ö–û–†–ò–°–¢–£–í–ê–ß–Ü–í -->
    <record id="view_budget_plan_line_simplified_tree" model="ir.ui.view">
        <field name="name">budget.plan.line.simplified.tree</field>
        <field name="model">budget.plan.line</field>
        <field name="priority">15</field>
        <field name="arch" type="xml">
            <tree editable="bottom" decoration-muted="is_consolidation">
                <!-- –û–°–ù–û–í–ù–Ü –ü–û–õ–Ø -->
                <field name="budget_category_id" string="–ö–∞—Ç–µ–≥–æ—Ä—ñ—è"
                       options="{'no_create': True}"/>
                <field name="cost_center_id" string="–¶–µ–Ω—Ç—Ä –≤–∏—Ç—Ä–∞—Ç"
                       options="{'no_create': True}"/>
                <field name="description" string="–û–ø–∏—Å"/>

                <!-- –ü–õ–ê–ù–£–í–ê–ù–ù–Ø -->
                <field name="quantity" string="–ö—ñ–ª-—Ç—å"/>
                <field name="unit_price" string="–¶—ñ–Ω–∞ –∑–∞ –æ–¥." widget="monetary"/>
                <field name="planned_amount" string="–°—É–º–∞" widget="monetary" sum="–í—Å—å–æ–≥–æ"/>

                <!-- –í–ò–ö–û–ù–ê–ù–ù–Ø -->
                <field name="actual_amount" string="–§–∞–∫—Ç" widget="monetary" readonly="1"/>

                <!-- –°–õ–£–ñ–ë–û–í–Ü –ü–û–õ–Ø -->
                <field name="currency_id" invisible="1"/>
                <field name="is_consolidation" invisible="1"/>
            </tree>
        </field>
    </record>

    <!-- –†–û–ó–®–ò–†–ï–ù–ê –§–û–†–ú–ê –î–õ–Ø –ê–î–ú–Ü–ù–Ü–°–¢–†–ê–¢–û–†–Ü–í -->
    <record id="view_budget_plan_line_admin_form" model="ir.ui.view">
        <field name="name">budget.plan.line.admin.form</field>
        <field name="model">budget.plan.line</field>
        <field name="priority">5</field>
        <field name="groups_id" eval="[(6, 0, [ref('account.group_account_manager')])]"/>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="description" placeholder="–û–ø–∏—Å —Å—Ç–∞—Ç—Ç—ñ –±—é–¥–∂–µ—Ç—É..."/>
                        </h1>
                    </div>

                    <group>
                        <group string="–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—è">
                            <field name="budget_category_id"/>
                            <field name="cost_center_id"/>
                            <field name="category_code" readonly="1"/>
                            <field name="cost_center_code" readonly="1"/>
                        </group>

                        <group string="üí∞ –§—ñ–Ω–∞–Ω—Å–æ–≤—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏">
                            <field name="quantity"/>
                            <field name="unit_price"/>
                            <field name="planned_amount" class="oe_inline"
                                   style="font-size: 16px; font-weight: bold;"/>
                            <field name="currency_id" invisible="1"/>
                        </group>
                    </group>

                    <group>
                        <group string="–û–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ">
                            <field name="account_id"/>
                            <field name="analytic_account_id"/>
                        </group>

                        <group string="–ú–µ—Ç–æ–¥–æ–ª–æ–≥—ñ—è">
                            <field name="calculation_method"/>
                            <field name="percentage_base"
                                   invisible="calculation_method != 'percentage'"/>
                        </group>
                    </group>

                    <group string="–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ–π–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞">
                        <group>
                            <field name="department_id"/>
                            <field name="project_id"/>
                        </group>
                        <group>
                            <field name="sales_forecast_line_id"/>
                            <field name="is_consolidation"/>
                        </group>
                    </group>

                    <notebook>
                        <page string="–í–∏–∫–æ–Ω–∞–Ω–Ω—è">
                            <group>
                                <group string="–ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ">
                                    <field name="planned_amount" readonly="1"/>
                                </group>
                                <group string="–§–∞–∫—Ç–∏—á–Ω–æ">
                                    <field name="committed_amount"/>
                                    <field name="actual_amount"/>
                                </group>
                            </group>

                            <group string="–†–æ–∑—Ä–∞—Ö—É–Ω–∫–∏">
                                <field name="calculation_basis" nolabel="1"/>
                            </group>
                        </page>

                        <page string="–ó–≤'—è–∑–∫–∏">
                            <group>
                                <group string="–ü—Ä–æ–µ–∫—Ç">
                                    <field name="project_id"/>
                                </group>
                                <group string="–ü—Ä–æ–≥–Ω–æ–∑ –ø—Ä–æ–¥–∞–∂—ñ–≤">
                                    <field name="sales_forecast_line_id"/>
                                </group>
                            </group>
                        </page>

                        <page string="–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è">
                            <field name="notes" nolabel="1"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- KANBAN VIEW –î–õ–Ø –ö–ê–¢–ï–ì–û–†–Ü–ô -->
    <record id="view_budget_plan_line_kanban" model="ir.ui.view">
        <field name="name">budget.plan.line.kanban</field>
        <field name="model">budget.plan.line</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_mobile">
                <field name="budget_category_id"/>
                <field name="cost_center_id"/>
                <field name="description"/>
                <field name="planned_amount"/>
                <field name="actual_amount"/>
                <field name="is_consolidation"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_content">
                                <div class="o_kanban_record_top">
                                    <div class="o_kanban_record_headings">
                                        <strong class="o_kanban_record_title">
                                            <span t-if="record.budget_category_id.raw_value">
                                                <t t-esc="record.budget_category_id.value"/>
                                            </span>
                                        </strong>
                                        <small class="o_kanban_record_subtitle text-muted">
                                            <span t-if="record.cost_center_id.raw_value">
                                                <t t-esc="record.cost_center_id.value"/>
                                            </span>
                                        </small>
                                    </div>
                                </div>

                                <div class="o_kanban_record_body">
                                    <field name="description"/>

                                    <div class="row mt8">
                                        <div class="col-6">
                                            <strong>–ü–ª–∞–Ω–æ–≤–æ:</strong><br/>
                                            <field name="planned_amount" widget="monetary"/>
                                        </div>
                                        <div class="col-6">
                                            <strong>–§–∞–∫—Ç–∏—á–Ω–æ:</strong><br/>
                                            <field name="actual_amount" widget="monetary"/>
                                        </div>
                                    </div>
                                </div>

                                <div class="o_kanban_record_bottom" t-if="record.is_consolidation.raw_value">
                                    <div class="oe_kanban_bottom_left">
                                        <span class="badge badge-info">–ö–æ–Ω—Å–æ–ª—ñ–¥–∞—Ü—ñ—è</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- SEARCH VIEW –ó –ö–ê–¢–ï–ì–û–†–Ü–Ø–ú–ò -->
    <record id="view_budget_plan_line_search_categories" model="ir.ui.view">
        <field name="name">budget.plan.line.search.categories</field>
        <field name="model">budget.plan.line</field>
        <field name="priority">16</field>
        <field name="arch" type="xml">
            <search string="–ü–æ—à—É–∫ –ø–æ–∑–∏—Ü—ñ–π –±—é–¥–∂–µ—Ç—É">
                <field name="description"/>
                <field name="budget_category_id"/>
                <field name="cost_center_id"/>
                <field name="plan_id"/>

                <separator/>
                <filter string="–ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏" name="with_categories"
                        domain="[('budget_category_id', '!=', False)]"/>
                <filter string="–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π" name="without_categories"
                        domain="[('budget_category_id', '=', False)]"/>
                <filter string="–ó —Ü–µ–Ω—Ç—Ä–æ–º –≤–∏—Ç—Ä–∞—Ç" name="with_cost_center"
                        domain="[('cost_center_id', '!=', False)]"/>
                <filter string="–ö–æ–Ω—Å–æ–ª—ñ–¥–∞—Ü—ñ–π–Ω—ñ" name="consolidation"
                        domain="[('is_consolidation', '=', True)]"/>

                <separator/>
                <filter string="–í–µ–ª–∏–∫—ñ —Å—É–º–∏ (>100–∫)" name="big_amounts"
                        domain="[('planned_amount', '>', 100000)]"/>
                <filter string="–ë–µ–∑ –æ–±–ª—ñ–∫—É" name="no_account"
                        domain="[('account_id', '=', False)]"/>

                <group expand="0" string="–ì—Ä—É–ø—É–≤–∞—Ç–∏ –∑–∞">
                    <filter string="–ö–∞—Ç–µ–≥–æ—Ä—ñ—è –≤–∏—Ç—Ä–∞—Ç" name="group_category"
                            context="{'group_by': 'budget_category_id'}"/>
                    <filter string="–¶–µ–Ω—Ç—Ä –≤–∏—Ç—Ä–∞—Ç" name="group_cost_center"
                            context="{'group_by': 'cost_center_id'}"/>
                    <filter string="–†–∞—Ö—É–Ω–æ–∫" name="group_account"
                            context="{'group_by': 'account_id'}"/>
                    <filter string="–ú–µ—Ç–æ–¥ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É" name="group_method"
                            context="{'group_by': 'calculation_method'}"/>
                    <filter string="–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª" name="group_department"
                            context="{'group_by': 'department_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- ACTION –î–õ–Ø –õ–Ü–ù–Ü–ô –ë–Æ–î–ñ–ï–¢–£ –ó –ö–ê–¢–ï–ì–û–†–Ü–Ø–ú–ò -->
    <record id="action_budget_lines_with_categories" model="ir.actions.act_window">
        <field name="name">–ü–æ–∑–∏—Ü—ñ—ó –±—é–¥–∂–µ—Ç—ñ–≤ (–∑ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏)</field>
        <field name="res_model">budget.plan.line</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="context">{'search_default_with_categories': 1}</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('view_budget_plan_line_simplified_tree')}),
            (0, 0, {'view_mode': 'form'})]"/>
        <field name="search_view_id" ref="view_budget_plan_line_search_categories"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—è–º–∏ –±—é–¥–∂–µ—Ç—ñ–≤ —á–µ—Ä–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó!
            </p>
            <p>
                –°–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π —Å–ø—Ä–æ—â—É—î:
                <ul>
                    <li>–í–≤–µ–¥–µ–Ω–Ω—è –±—é–¥–∂–µ—Ç–Ω–∏—Ö –ø–æ–∑–∏—Ü—ñ–π</li>
                    <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –∑ —Ä–∞—Ö—É–Ω–∫–∞–º–∏</li>
                    <li>–ê–Ω–∞–ª—ñ–∑ –≤–∏—Ç—Ä–∞—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö</li>
                    <li>–ö–æ–Ω—Å–æ–ª—ñ–¥–∞—Ü—ñ—é –±—é–¥–∂–µ—Ç—ñ–≤</li>
                </ul>
            </p>
        </field>
    </record>

    <!-- –ú–ï–ù–Æ –î–õ–Ø –†–û–ë–û–¢–ò –ó –ö–ê–¢–ï–ì–û–†–Ü–Ø–ú–ò -->

    <!-- SERVER ACTION –î–õ–Ø –û–ù–û–í–õ–ï–ù–ù–Ø –û–ë–õ–Ü–ö–û–í–ò–• –î–ê–ù–ò–• -->
    <record id="action_update_accounting_data_bulk" model="ir.actions.server">
        <field name="name">–û–Ω–æ–≤–∏—Ç–∏ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ</field>
        <field name="model_id" ref="model_budget_plan_line"/>
        <field name="binding_model_id" ref="model_budget_plan_line"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code">
for line in records:
    line._compute_accounting_data()

if records:
    env.cr.commit()

action = {
    'type': 'ir.actions.client',
    'tag': 'display_notification',
    'params': {
        'title': '–û–Ω–æ–≤–ª–µ–Ω–æ!',
        'message': f'–û–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è {len(records)} –ø–æ–∑–∏—Ü—ñ–π',
        'type': 'success',
    }
}
        </field>
    </record>

    <!-- WIZARD –î–õ–Ø –ú–ê–°–û–í–û–ì–û –ü–†–ò–ó–ù–ê–ß–ï–ù–ù–Ø –ö–ê–¢–ï–ì–û–†–Ü–ô -->
    <record id="view_budget_assign_categories_wizard" model="ir.ui.view">
        <field name="name">budget.assign.categories.wizard</field>
        <field name="model">budget.assign.categories.wizard</field>
        <field name="arch" type="xml">
            <form string="–ú–∞—Å–æ–≤–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π">
                <group>
                    <group string="–¶—ñ–ª—å–æ–≤—ñ –ø–æ–∑–∏—Ü—ñ—ó">
                        <field name="line_ids" widget="many2many_tags" readonly="1"/>
                        <field name="line_count" readonly="1"/>
                    </group>
                    <group string="–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏">
                        <field name="budget_category_id"/>
                        <field name="cost_center_id"/>
                        <field name="update_accounts"/>
                    </group>
                </group>

                <div class="alert alert-info" role="status">
                    <strong>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:</strong> –ë—É–¥—É—Ç—å –æ–Ω–æ–≤–ª–µ–Ω—ñ –≤—Å—ñ –æ–±—Ä–∞–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó –±—é–¥–∂–µ—Ç—É.
                    –Ø–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ "–û–Ω–æ–≤–∏—Ç–∏ —Ä–∞—Ö—É–Ω–∫–∏", —Ç–æ –æ–±–ª—ñ–∫–æ–≤—ñ —Ä–∞—Ö—É–Ω–∫–∏ –±—É–¥—É—Ç—å
                    –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω—ñ –∑–≥—ñ–¥–Ω–æ –∑ –Ω–æ–≤–∏–º–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏.
                </div>

                <footer>
                    <button name="action_assign_categories"
                            string="–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó"
                            type="object"
                            class="btn-primary"/>
                    <button string="–°–∫–∞—Å—É–≤–∞—Ç–∏"
                            class="btn-default"
                            special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

</odoo>